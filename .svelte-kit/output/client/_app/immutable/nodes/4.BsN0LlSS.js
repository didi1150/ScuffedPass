import{g as Ye,i as be}from"../chunks/entry.DszAjk8y.js";import{a as le,g as Ge,b as ge}from"../chunks/axios.Cqd8ba7t.js";import{s as ce,q as Q,b as T,f as z,h as I,j as W,r as x,l as P,d as D,v as M,i as J,m as w,w as re,x as Je,y as Y,t as ie,k as oe,n as ue,_ as $e,B as ke,z as Xe,e as ae,o as Ze}from"../chunks/scheduler.DLXp1mf0.js";import{S as de,i as he,b as G,d as A,e as S,m as K,t as H,a as L,f as R,g as Oe,c as ye}from"../chunks/index.CDjF2aYJ.js";import{M as ve}from"../chunks/Modal.Bfgxw4_d.js";import{C as rt}from"../chunks/ChangeMasterPassword.B1j-w_Qt.js";import{e as fe,C as xe}from"../chunks/ConfirmAction.DgXI4Jzy.js";import{h as et,d as tt,a as st,m as we,b as nt,n as De}from"../chunks/key.Dz1h-UZO.js";import{I as ne}from"../chunks/InputBox.D2QTA3o3.js";import{M as He}from"../chunks/MediaQuery.DweYF8x5.js";const at=!1,it=async({url:n})=>{try{const e=await le.get("/vault");if(e.data&&Array.isArray(e.data))return{passwords:e.data.map(s=>({websiteURL:s.websiteURL,email:s.email,password:s.password,iv:s.iv,passwordID:s.passwordID}))}}catch{Ye("/login")}},Wt=Object.freeze(Object.defineProperty({__proto__:null,load:it,ssr:at},Symbol.toStringTag,{value:"Module"}));function Le(n){let e,t="Oops, something went wrong";return{c(){e=T("p"),e.textContent=t,this.h()},l(s){e=I(s,"P",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-hriv3"&&(e.textContent=t),this.h()},h(){M(e,"class","error svelte-1kik828")},m(s,l){J(s,e,l)},d(s){s&&D(e)}}}function ot(n){let e,t,s="Add Password",l,r,a,u,i,f,p,b,m,_,g,O,$,c,h="Save",v,d,o,k;function U(E){n[7](E)}let ee={id:"website",label:"Enter a Website",required:!0};n[3]!==void 0&&(ee.value=n[3]),r=new ne({props:ee}),Q.push(()=>G(r,"value",U));function y(E){n[8](E)}let B={id:"email",label:"Enter an Email",required:!0};n[1]!==void 0&&(B.value=n[1]),i=new ne({props:B}),Q.push(()=>G(i,"value",y));function V(E){n[9](E)}let F={id:"password",label:"Enter a Password",required:!0,type:"password"};n[2]!==void 0&&(F.value=n[2]),b=new ne({props:F}),Q.push(()=>G(b,"value",V));function X(E){n[10](E)}let te={id:"masterPassword",label:"Enter your Master Password",required:!0,type:"password"};n[4]!==void 0&&(te.value=n[4]),g=new ne({props:te}),Q.push(()=>G(g,"value",X));let j=n[0]&&Le();return{c(){e=T("form"),t=T("h2"),t.textContent=s,l=z(),A(r.$$.fragment),u=z(),A(i.$$.fragment),p=z(),A(b.$$.fragment),_=z(),A(g.$$.fragment),$=z(),c=T("button"),c.textContent=h,v=z(),j&&j.c(),this.h()},l(E){e=I(E,"FORM",{class:!0});var N=W(e);t=I(N,"H2",{"data-svelte-h":!0}),x(t)!=="svelte-1arwlf2"&&(t.textContent=s),l=P(N),S(r.$$.fragment,N),u=P(N),S(i.$$.fragment,N),p=P(N),S(b.$$.fragment,N),_=P(N),S(g.$$.fragment,N),$=P(N),c=I(N,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),x(c)!=="svelte-1f2bxem"&&(c.textContent=h),v=P(N),j&&j.l(N),N.forEach(D),this.h()},h(){M(c,"type","submit"),M(c,"class","svelte-1kik828"),M(e,"class","svelte-1kik828")},m(E,N){J(E,e,N),w(e,t),w(e,l),K(r,e,null),w(e,u),K(i,e,null),w(e,p),K(b,e,null),w(e,_),K(g,e,null),w(e,$),w(e,c),w(e,v),j&&j.m(e,null),d=!0,o||(k=re(e,"submit",Je(n[5])),o=!0)},p(E,[N]){const se={};!a&&N&8&&(a=!0,se.value=E[3],Y(()=>a=!1)),r.$set(se);const _e={};!f&&N&2&&(f=!0,_e.value=E[1],Y(()=>f=!1)),i.$set(_e);const pe={};!m&&N&4&&(m=!0,pe.value=E[2],Y(()=>m=!1)),b.$set(pe);const me={};!O&&N&16&&(O=!0,me.value=E[4],Y(()=>O=!1)),g.$set(me),E[0]?j||(j=Le(),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},i(E){d||(H(r.$$.fragment,E),H(i.$$.fragment,E),H(b.$$.fragment,E),H(g.$$.fragment,E),d=!0)},o(E){L(r.$$.fragment,E),L(i.$$.fragment,E),L(b.$$.fragment,E),L(g.$$.fragment,E),d=!1},d(E){E&&D(e),R(r),R(i),R(b),R(g),j&&j.d(),o=!1,k()}}}function ut(n,e,t){let{isOpen:s=!1}=e,l=!1;const r=async()=>{const g=(await le.get("/auth/account/user")).data,O=await Ge(g);console.log(O);const{hashPW:$}=await et(g,f,O);le.post("/auth/account/user/encryptionKey",{hash:$}).then(c=>{if(c.status===200){console.log(c.data);const{encryptionKey:h,privateKeyMaster:v,iv:d}=c.data;tt(v,f,O,d).then(o=>{st(h,o).then(async k=>{const U=await we(i,k);we(u,k,nt(U.iv)).then(ee=>{ee?le.post("/vault",{website:U.encryptedData,email:a,password:ee.encryptedData,iv:U.iv}).then(y=>{y.status===200&&(t(6,s=!1),be())}):t(0,l=!0)})})}).catch(o=>{console.error(o),t(0,l=!0)})}})};let a="",u="",i="",f="";function p(g){i=g,t(3,i)}function b(g){a=g,t(1,a)}function m(g){u=g,t(2,u)}function _(g){f=g,t(4,f)}return n.$$set=g=>{"isOpen"in g&&t(6,s=g.isOpen)},[l,a,u,i,f,r,s,p,b,m,_]}class Te extends de{constructor(e){super(),he(this,e,ut,ot,ce,{isOpen:6})}}function Ve(n){let e,t;return{c(){e=T("p"),t=ie(n[5]),this.h()},l(s){e=I(s,"P",{class:!0});var l=W(e);t=oe(l,n[5]),l.forEach(D),this.h()},h(){M(e,"class","error svelte-1cpm4zt")},m(s,l){J(s,e,l),w(e,t)},p(s,l){l&32&&ue(t,s[5])},d(s){s&&D(e)}}}function ft(n){let e,t,s="Edit Password",l,r,a="<span>Hint: Leave fields empty if you don&#39;t want to change their value</span>",u,i,f,p,b,m,_,g,O,$,c,h,v,d,o,k,U,ee="Edit",y,B,V,F;function X(C){n[9](C)}let te={id:"website",type:"text",label:"Change your website (Optional)"};n[0]!==void 0&&(te.value=n[0]),i=new ne({props:te}),Q.push(()=>G(i,"value",X));function j(C){n[10](C)}let E={id:"email",type:"text",label:"Change your email (Optional)"};n[1]!==void 0&&(E.value=n[1]),b=new ne({props:E}),Q.push(()=>G(b,"value",j));function N(C){n[11](C)}let se={id:"password",type:"password",label:"Enter New Password"};n[2]!==void 0&&(se.value=n[2]),g=new ne({props:se}),Q.push(()=>G(g,"value",N));function _e(C){n[12](C)}let pe={id:"repeat",type:"password",label:"Enter Password again to confirm"};n[3]!==void 0&&(pe.value=n[3]),c=new ne({props:pe}),Q.push(()=>G(c,"value",_e));function me(C){n[13](C)}let Ie={id:"master",type:"password",label:"Enter Master Password",required:!0};n[4]!==void 0&&(Ie.value=n[4]),d=new ne({props:Ie}),Q.push(()=>G(d,"value",me));let Z=n[5].length!=0&&Ve(n);return{c(){e=T("form"),t=T("h2"),t.textContent=s,l=z(),r=T("div"),r.innerHTML=a,u=z(),A(i.$$.fragment),p=z(),A(b.$$.fragment),_=z(),A(g.$$.fragment),$=z(),A(c.$$.fragment),v=z(),A(d.$$.fragment),k=z(),U=T("button"),U.textContent=ee,y=z(),Z&&Z.c(),this.h()},l(C){e=I(C,"FORM",{class:!0});var q=W(e);t=I(q,"H2",{"data-svelte-h":!0}),x(t)!=="svelte-1k520nd"&&(t.textContent=s),l=P(q),r=I(q,"DIV",{class:!0,"data-svelte-h":!0}),x(r)!=="svelte-10x1paf"&&(r.innerHTML=a),u=P(q),S(i.$$.fragment,q),p=P(q),S(b.$$.fragment,q),_=P(q),S(g.$$.fragment,q),$=P(q),S(c.$$.fragment,q),v=P(q),S(d.$$.fragment,q),k=P(q),U=I(q,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),x(U)!=="svelte-1xlxwn7"&&(U.textContent=ee),y=P(q),Z&&Z.l(q),q.forEach(D),this.h()},h(){M(r,"class","hint svelte-1cpm4zt"),M(U,"type","submit"),M(U,"class","svelte-1cpm4zt"),M(e,"class","svelte-1cpm4zt")},m(C,q){J(C,e,q),w(e,t),w(e,l),w(e,r),w(e,u),K(i,e,null),w(e,p),K(b,e,null),w(e,_),K(g,e,null),w(e,$),K(c,e,null),w(e,v),K(d,e,null),w(e,k),w(e,U),w(e,y),Z&&Z.m(e,null),B=!0,V||(F=re(e,"submit",Je(n[6])),V=!0)},p(C,[q]){const Me={};!f&&q&1&&(f=!0,Me.value=C[0],Y(()=>f=!1)),i.$set(Me);const Ce={};!m&&q&2&&(m=!0,Ce.value=C[1],Y(()=>m=!1)),b.$set(Ce);const Ee={};!O&&q&4&&(O=!0,Ee.value=C[2],Y(()=>O=!1)),g.$set(Ee);const ze={};!h&&q&8&&(h=!0,ze.value=C[3],Y(()=>h=!1)),c.$set(ze);const Pe={};!o&&q&16&&(o=!0,Pe.value=C[4],Y(()=>o=!1)),d.$set(Pe),C[5].length!=0?Z?Z.p(C,q):(Z=Ve(C),Z.c(),Z.m(e,null)):Z&&(Z.d(1),Z=null)},i(C){B||(H(i.$$.fragment,C),H(b.$$.fragment,C),H(g.$$.fragment,C),H(c.$$.fragment,C),H(d.$$.fragment,C),B=!0)},o(C){L(i.$$.fragment,C),L(b.$$.fragment,C),L(g.$$.fragment,C),L(c.$$.fragment,C),L(d.$$.fragment,C),B=!1},d(C){C&&D(e),R(i),R(b),R(g),R(c),R(d),Z&&Z.d(),V=!1,F()}}}function pt(n,e,t){let{passwordID:s}=e,{isOpen:l}=e,r="",a="",u="",i="",f="",p="";const b=async()=>{if(f.length===0){t(5,p="Please fill in the master password");return}if(u!==i){t(5,p="Please confirm the password you are trying to use");return}u.length==0&&i.length==0&&r.length==0&&a.length==0&&t(7,l=!1);const c=(await le.get("/auth/account/user")).data,h=await Ge(c),{hashPW:v}=await et(c,f,h);le.post("/auth/account/user/encryptionKey",{hash:v}).then(d=>{if(d.status===200){const{encryptionKey:o,privateKeyMaster:k,iv:U}=d.data;tt(k,f,h,U).then(ee=>{st(o,ee).then(async y=>{const B=await we(r,y);we(u,y,nt(B.iv)).then(V=>{V?le.patch("/vault",{id:s,website:B.encryptedData,email:a,password:V.encryptedData,iv:B.iv}).then(F=>{F.status===200&&(t(7,l=!1),be())}):t(5,p="The master password is incorrect")})})}).catch(()=>t(5,p="The master password is incorrect"))}})};function m(c){r=c,t(0,r)}function _(c){a=c,t(1,a)}function g(c){u=c,t(2,u)}function O(c){i=c,t(3,i)}function $(c){f=c,t(4,f)}return n.$$set=c=>{"passwordID"in c&&t(8,s=c.passwordID),"isOpen"in c&&t(7,l=c.isOpen)},[r,a,u,i,f,p,b,l,s,m,_,g,O,$]}class lt extends de{constructor(e){super(),he(this,e,pt,ft,ce,{passwordID:8,isOpen:7})}}function Be(n,e,t){const s=n.slice();return s[18]=e[t],s}function Ne(n,e,t){const s=n.slice();return s[21]=e[t][0],s[22]=e[t][1],s}function ct(n){let e,t;return e=new Te({}),{c(){A(e.$$.fragment)},l(s){S(e.$$.fragment,s)},m(s,l){K(e,s,l),t=!0},p:Ze,i(s){t||(H(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){R(e,s)}}}function dt(n){let e,t,s,l;function r(i){n[9](i)}function a(i){n[10](i)}let u={};return n[3]!==void 0&&(u.passwordID=n[3]),n[1]!==void 0&&(u.isOpen=n[1]),e=new lt({props:u}),Q.push(()=>G(e,"passwordID",r)),Q.push(()=>G(e,"isOpen",a)),{c(){A(e.$$.fragment)},l(i){S(e.$$.fragment,i)},m(i,f){K(e,i,f),l=!0},p(i,f){const p={};!t&&f&8&&(t=!0,p.passwordID=i[3],Y(()=>t=!1)),!s&&f&2&&(s=!0,p.isOpen=i[1],Y(()=>s=!1)),e.$set(p)},i(i){l||(H(e.$$.fragment,i),l=!0)},o(i){L(e.$$.fragment,i),l=!1},d(i){R(e,i)}}}function ht(n){let e,t,s;function l(a){n[8](a)}let r={errorMessage:"Couldn't delete this password",callback:n[7],question:"Do you want to delete this password?"};return n[1]!==void 0&&(r.isOpen=n[1]),e=new xe({props:r}),Q.push(()=>G(e,"isOpen",l)),{c(){A(e.$$.fragment)},l(a){S(e.$$.fragment,a)},m(a,u){K(e,a,u),s=!0},p(a,u){const i={};u&10&&(i.callback=a[7]),!t&&u&2&&(t=!0,i.isOpen=a[1],Y(()=>t=!1)),e.$set(i)},i(a){s||(H(e.$$.fragment,a),s=!0)},o(a){L(e.$$.fragment,a),s=!1},d(a){R(e,a)}}}function _t(n){let e,t,s,l;const r=[ht,dt,ct],a=[];function u(i,f){return i[2]==="delete"?0:i[2]==="edit"?1:i[2]==="add"?2:-1}return~(e=u(n))&&(t=a[e]=r[e](n)),{c(){t&&t.c(),s=ae()},l(i){t&&t.l(i),s=ae()},m(i,f){~e&&a[e].m(i,f),J(i,s,f),l=!0},p(i,f){let p=e;e=u(i),e===p?~e&&a[e].p(i,f):(t&&(Oe(),L(a[p],1,1,()=>{a[p]=null}),ye()),~e?(t=a[e],t?t.p(i,f):(t=a[e]=r[e](i),t.c()),H(t,1),t.m(s.parentNode,s)):t=null)},i(i){l||(H(t),l=!0)},o(i){L(t),l=!1},d(i){i&&D(s),~e&&a[e].d(i)}}}function Ue(n){let e,t=n[22]+"",s;return{c(){e=T("td"),s=ie(t),this.h()},l(l){e=I(l,"TD",{class:!0});var r=W(e);s=oe(r,t),r.forEach(D),this.h()},h(){M(e,"class","svelte-2rzhtp")},m(l,r){J(l,e,r),w(e,s)},p(l,r){r&1&&t!==(t=l[22]+"")&&ue(s,t)},d(l){l&&D(e)}}}function qe(n){let e,t=n[21]!=="iv"&&n[21]!=="passwordID"&&n[21]!=="password"&&Ue(n);return{c(){t&&t.c(),e=ae()},l(s){t&&t.l(s),e=ae()},m(s,l){t&&t.m(s,l),J(s,e,l)},p(s,l){s[21]!=="iv"&&s[21]!=="passwordID"&&s[21]!=="password"?t?t.p(s,l):(t=Ue(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){s&&D(e),t&&t.d(s)}}}function Ae(n){let e,t;return{c(){e=T("span"),t=ie(n[4]),this.h()},l(s){e=I(s,"SPAN",{class:!0});var l=W(e);t=oe(l,n[4]),l.forEach(D),this.h()},h(){M(e,"class","tooltip svelte-2rzhtp")},m(s,l){J(s,e,l),w(e,t)},p(s,l){l&16&&ue(t,s[4])},d(s){s&&D(e)}}}function Se(n){let e,t,s,l,r,a='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="white" d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg>',u,i,f,p,b='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="white" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83l3.75 3.75z"></path></svg>',m,_,g,O='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="#ff0000" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"></path></svg>',$,c,h,v=fe(Object.entries(n[18])),d=[];for(let y=0;y<v.length;y+=1)d[y]=qe(Ne(n,v,y));function o(){return n[12](n[18])}let k=n[5]===n[18].passwordID&&Ae(n);function U(){return n[13](n[18])}function ee(){return n[14](n[18])}return{c(){e=T("tr");for(let y=0;y<d.length;y+=1)d[y].c();t=z(),s=T("td"),l=T("div"),r=T("button"),r.innerHTML=a,u=z(),k&&k.c(),i=z(),f=T("td"),p=T("button"),p.innerHTML=b,m=z(),_=T("td"),g=T("button"),g.innerHTML=O,$=z(),this.h()},l(y){e=I(y,"TR",{});var B=W(e);for(let j=0;j<d.length;j+=1)d[j].l(B);t=P(B),s=I(B,"TD",{class:!0});var V=W(s);l=I(V,"DIV",{class:!0});var F=W(l);r=I(F,"BUTTON",{class:!0,"data-svelte-h":!0}),x(r)!=="svelte-pvekvg"&&(r.innerHTML=a),u=P(F),k&&k.l(F),F.forEach(D),V.forEach(D),i=P(B),f=I(B,"TD",{class:!0});var X=W(f);p=I(X,"BUTTON",{class:!0,"data-svelte-h":!0}),x(p)!=="svelte-xe7heq"&&(p.innerHTML=b),X.forEach(D),m=P(B),_=I(B,"TD",{class:!0});var te=W(_);g=I(te,"BUTTON",{class:!0,"data-svelte-h":!0}),x(g)!=="svelte-oou269"&&(g.innerHTML=O),te.forEach(D),$=P(B),B.forEach(D),this.h()},h(){M(r,"class","svelte-2rzhtp"),M(l,"class","copy-container svelte-2rzhtp"),M(s,"class","svelte-2rzhtp"),M(p,"class","svelte-2rzhtp"),M(f,"class","svelte-2rzhtp"),M(g,"class","svelte-2rzhtp"),M(_,"class","svelte-2rzhtp")},m(y,B){J(y,e,B);for(let V=0;V<d.length;V+=1)d[V]&&d[V].m(e,null);w(e,t),w(e,s),w(s,l),w(l,r),w(l,u),k&&k.m(l,null),w(e,i),w(e,f),w(f,p),w(e,m),w(e,_),w(_,g),w(e,$),c||(h=[re(r,"click",o),re(p,"click",U),re(g,"click",ee)],c=!0)},p(y,B){if(n=y,B&1){v=fe(Object.entries(n[18]));let V;for(V=0;V<v.length;V+=1){const F=Ne(n,v,V);d[V]?d[V].p(F,B):(d[V]=qe(F),d[V].c(),d[V].m(e,t))}for(;V<d.length;V+=1)d[V].d(1);d.length=v.length}n[5]===n[18].passwordID?k?k.p(n,B):(k=Ae(n),k.c(),k.m(l,null)):k&&(k.d(1),k=null)},d(y){y&&D(e),$e(d,y),k&&k.d(),c=!1,Xe(h)}}}function Ke(n){let e,t='<span class="svelte-2rzhtp">Nothing to show here</span>';return{c(){e=T("div"),e.innerHTML=t,this.h()},l(s){e=I(s,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-ipshvi"&&(e.innerHTML=t),this.h()},h(){M(e,"class","empty svelte-2rzhtp")},m(s,l){J(s,e,l)},d(s){s&&D(e)}}}function mt(n){let e,t,s,l,r,a,u,i='<tr class="header"><th class="svelte-2rzhtp">Website</th> <th class="svelte-2rzhtp">Email</th> <th class="svelte-2rzhtp">Copy</th> <th class="svelte-2rzhtp">Edit</th> <th class="svelte-2rzhtp">Delete</th> </tr><tr></tr>',f,p,b,m;function _(h){n[11](h)}let g={$$slots:{default:[_t]},$$scope:{ctx:n}};n[1]!==void 0&&(g.isOpen=n[1]),e=new ve({props:g}),Q.push(()=>G(e,"isOpen",_));let O=fe(n[0]),$=[];for(let h=0;h<O.length;h+=1)$[h]=Se(Be(n,O,h));let c=n[0].length==0&&Ke();return{c(){A(e.$$.fragment),s=z(),l=T("div"),r=T("div"),a=T("table"),u=T("thead"),u.innerHTML=i,f=z(),p=T("tbody");for(let h=0;h<$.length;h+=1)$[h].c();b=z(),c&&c.c(),this.h()},l(h){S(e.$$.fragment,h),s=P(h),l=I(h,"DIV",{class:!0});var v=W(l);r=I(v,"DIV",{class:!0});var d=W(r);a=I(d,"TABLE",{class:!0});var o=W(a);u=I(o,"THEAD",{class:!0,"data-svelte-h":!0}),x(u)!=="svelte-15yyydm"&&(u.innerHTML=i),f=P(o),p=I(o,"TBODY",{});var k=W(p);for(let U=0;U<$.length;U+=1)$[U].l(k);k.forEach(D),b=P(o),c&&c.l(o),o.forEach(D),d.forEach(D),v.forEach(D),this.h()},h(){M(u,"class","svelte-2rzhtp"),M(a,"class","svelte-2rzhtp"),M(r,"class","vault-box"),M(l,"class","background svelte-2rzhtp")},m(h,v){K(e,h,v),J(h,s,v),J(h,l,v),w(l,r),w(r,a),w(a,u),w(a,f),w(a,p);for(let d=0;d<$.length;d+=1)$[d]&&$[d].m(p,null);w(a,b),c&&c.m(a,null),m=!0},p(h,[v]){const d={};if(v&33554446&&(d.$$scope={dirty:v,ctx:h}),!t&&v&2&&(t=!0,d.isOpen=h[1],Y(()=>t=!1)),e.$set(d),v&127){O=fe(h[0]);let o;for(o=0;o<O.length;o+=1){const k=Be(h,O,o);$[o]?$[o].p(k,v):($[o]=Se(k),$[o].c(),$[o].m(p,null))}for(;o<$.length;o+=1)$[o].d(1);$.length=O.length}h[0].length==0?c||(c=Ke(),c.c(),c.m(a,null)):c&&(c.d(1),c=null)},i(h){m||(H(e.$$.fragment,h),m=!0)},o(h){L(e.$$.fragment,h),m=!1},d(h){h&&(D(s),D(l)),R(e,h),$e($,h),c&&c.d()}}}function gt(n,e,t){let{tableData:s=[]}=e,l=[],r=!1,a="edit",u;ke(async()=>{s.forEach(async o=>{let k=await De(o.password,o.iv,ge());l.push({password:k,id:o.passwordID})})});const i=o=>l.find(k=>k.id===o);let f="",p=-1,b;const m=async o=>{clearTimeout(b);let k=i(o);if(!k)t(4,f="Error: Couldn't decrypt password");else try{await navigator.clipboard.writeText(k.password),t(4,f="Password copied")}catch{t(4,f="Failed to copy!")}t(5,p=o),b=setTimeout(()=>{t(5,p=-1)},2e3)},_=()=>{le.delete(`/vault/${u}`).then(o=>{o.status===200&&t(1,r=!1)}).finally(()=>be())};function g(o){r=o,t(1,r)}function O(o){u=o,t(3,u)}function $(o){r=o,t(1,r)}function c(o){r=o,t(1,r)}const h=o=>{m(o.passwordID)},v=o=>{t(2,a="edit"),t(3,u=o.passwordID),t(1,r=!0)},d=o=>{t(3,u=o.passwordID),t(2,a="delete"),t(1,r=!0)};return n.$$set=o=>{"tableData"in o&&t(0,s=o.tableData)},[s,r,a,u,f,p,m,_,g,O,$,c,h,v,d]}class vt extends de{constructor(e){super(),he(this,e,gt,mt,ce,{tableData:0})}}function Re(n,e,t){const s=n.slice();return s[18]=e[t],s}function wt(n){let e,t;return e=new Te({}),{c(){A(e.$$.fragment)},l(s){S(e.$$.fragment,s)},m(s,l){K(e,s,l),t=!0},p:Ze,i(s){t||(H(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){R(e,s)}}}function bt(n){let e,t,s,l;function r(i){n[9](i)}function a(i){n[10](i)}let u={};return n[3]!==void 0&&(u.passwordID=n[3]),n[1]!==void 0&&(u.isOpen=n[1]),e=new lt({props:u}),Q.push(()=>G(e,"passwordID",r)),Q.push(()=>G(e,"isOpen",a)),{c(){A(e.$$.fragment)},l(i){S(e.$$.fragment,i)},m(i,f){K(e,i,f),l=!0},p(i,f){const p={};!t&&f&8&&(t=!0,p.passwordID=i[3],Y(()=>t=!1)),!s&&f&2&&(s=!0,p.isOpen=i[1],Y(()=>s=!1)),e.$set(p)},i(i){l||(H(e.$$.fragment,i),l=!0)},o(i){L(e.$$.fragment,i),l=!1},d(i){R(e,i)}}}function $t(n){let e,t,s;function l(a){n[8](a)}let r={errorMessage:"Couldn't delete this password",callback:n[7],question:"Do you want to delete this password?"};return n[1]!==void 0&&(r.isOpen=n[1]),e=new xe({props:r}),Q.push(()=>G(e,"isOpen",l)),{c(){A(e.$$.fragment)},l(a){S(e.$$.fragment,a)},m(a,u){K(e,a,u),s=!0},p(a,u){const i={};u&10&&(i.callback=a[7]),!t&&u&2&&(t=!0,i.isOpen=a[1],Y(()=>t=!1)),e.$set(i)},i(a){s||(H(e.$$.fragment,a),s=!0)},o(a){L(e.$$.fragment,a),s=!1},d(a){R(e,a)}}}function kt(n){let e,t,s,l;const r=[$t,bt,wt],a=[];function u(i,f){return i[2]==="delete"?0:i[2]==="edit"?1:i[2]==="add"?2:-1}return~(e=u(n))&&(t=a[e]=r[e](n)),{c(){t&&t.c(),s=ae()},l(i){t&&t.l(i),s=ae()},m(i,f){~e&&a[e].m(i,f),J(i,s,f),l=!0},p(i,f){let p=e;e=u(i),e===p?~e&&a[e].p(i,f):(t&&(Oe(),L(a[p],1,1,()=>{a[p]=null}),ye()),~e?(t=a[e],t?t.p(i,f):(t=a[e]=r[e](i),t.c()),H(t,1),t.m(s.parentNode,s)):t=null)},i(i){l||(H(t),l=!0)},o(i){L(t),l=!1},d(i){i&&D(s),~e&&a[e].d(i)}}}function je(n){let e,t='<span class="svelte-1e97k94">Nothing to show here</span>';return{c(){e=T("div"),e.innerHTML=t,this.h()},l(s){e=I(s,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-1kzj0e"&&(e.innerHTML=t),this.h()},h(){M(e,"class","empty svelte-1e97k94")},m(s,l){J(s,e,l)},d(s){s&&D(e)}}}function We(n){let e,t;return{c(){e=T("span"),t=ie(n[4]),this.h()},l(s){e=I(s,"SPAN",{class:!0});var l=W(e);t=oe(l,n[4]),l.forEach(D),this.h()},h(){M(e,"class","tooltip svelte-1e97k94")},m(s,l){J(s,e,l),w(e,t)},p(s,l){l&16&&ue(t,s[4])},d(s){s&&D(e)}}}function Fe(n){let e,t,s,l=n[18].websiteURL+"",r,a,u,i=n[18].email+"",f,p,b,m,_,g='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="svelte-1e97k94"><path fill="white" d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg>',O,$,c,h='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="svelte-1e97k94"><path fill="white" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83l3.75 3.75z"></path></svg>',v,d='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" class="svelte-1e97k94"><path fill="#ff0000" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"></path></svg>',o,k,U;function ee(){return n[12](n[18])}let y=n[5]===n[18].passwordID&&We(n);function B(){return n[13](n[18])}function V(){return n[14](n[18])}return{c(){e=T("li"),t=T("div"),s=T("div"),r=ie(l),a=z(),u=T("div"),f=ie(i),p=z(),b=T("div"),m=T("div"),_=T("button"),_.innerHTML=g,O=z(),y&&y.c(),$=z(),c=T("button"),c.innerHTML=h,v=T("button"),v.innerHTML=d,o=z(),this.h()},l(F){e=I(F,"LI",{class:!0});var X=W(e);t=I(X,"DIV",{class:!0});var te=W(t);s=I(te,"DIV",{class:!0});var j=W(s);r=oe(j,l),j.forEach(D),a=P(te),u=I(te,"DIV",{class:!0});var E=W(u);f=oe(E,i),E.forEach(D),te.forEach(D),p=P(X),b=I(X,"DIV",{class:!0});var N=W(b);m=I(N,"DIV",{class:!0});var se=W(m);_=I(se,"BUTTON",{class:!0,"data-svelte-h":!0}),x(_)!=="svelte-1yzi9sd"&&(_.innerHTML=g),O=P(se),y&&y.l(se),se.forEach(D),$=P(N),c=I(N,"BUTTON",{class:!0,"data-svelte-h":!0}),x(c)!=="svelte-1gkj16n"&&(c.innerHTML=h),v=I(N,"BUTTON",{class:!0,"data-svelte-h":!0}),x(v)!=="svelte-38a3h4"&&(v.innerHTML=d),N.forEach(D),o=P(X),X.forEach(D),this.h()},h(){M(s,"class","website svelte-1e97k94"),M(u,"class","email svelte-1e97k94"),M(t,"class","details svelte-1e97k94"),M(_,"class","svg-container svelte-1e97k94"),M(m,"class","copy-container svelte-1e97k94"),M(c,"class","svg-container svelte-1e97k94"),M(v,"class","svg-container svelte-1e97k94"),M(b,"class","controls svelte-1e97k94"),M(e,"class","svelte-1e97k94")},m(F,X){J(F,e,X),w(e,t),w(t,s),w(s,r),w(t,a),w(t,u),w(u,f),w(e,p),w(e,b),w(b,m),w(m,_),w(m,O),y&&y.m(m,null),w(b,$),w(b,c),w(b,v),w(e,o),k||(U=[re(_,"click",ee),re(c,"click",B),re(v,"click",V)],k=!0)},p(F,X){n=F,X&1&&l!==(l=n[18].websiteURL+"")&&ue(r,l),X&1&&i!==(i=n[18].email+"")&&ue(f,i),n[5]===n[18].passwordID?y?y.p(n,X):(y=We(n),y.c(),y.m(m,null)):y&&(y.d(1),y=null)},d(F){F&&D(e),y&&y.d(),k=!1,Xe(U)}}}function Ot(n){let e,t,s,l,r,a,u;function i(_){n[11](_)}let f={$$slots:{default:[kt]},$$scope:{ctx:n}};n[1]!==void 0&&(f.isOpen=n[1]),e=new ve({props:f}),Q.push(()=>G(e,"isOpen",i));let p=n[0].length==0&&je(),b=fe(n[0]),m=[];for(let _=0;_<b.length;_+=1)m[_]=Fe(Re(n,b,_));return{c(){A(e.$$.fragment),s=z(),l=T("div"),r=T("ul"),p&&p.c(),a=z();for(let _=0;_<m.length;_+=1)m[_].c();this.h()},l(_){S(e.$$.fragment,_),s=P(_),l=I(_,"DIV",{class:!0});var g=W(l);r=I(g,"UL",{class:!0});var O=W(r);p&&p.l(O),a=P(O);for(let $=0;$<m.length;$+=1)m[$].l(O);O.forEach(D),g.forEach(D),this.h()},h(){M(r,"class","svelte-1e97k94"),M(l,"class","anchor svelte-1e97k94")},m(_,g){K(e,_,g),J(_,s,g),J(_,l,g),w(l,r),p&&p.m(r,null),w(r,a);for(let O=0;O<m.length;O+=1)m[O]&&m[O].m(r,null);u=!0},p(_,[g]){const O={};if(g&2097166&&(O.$$scope={dirty:g,ctx:_}),!t&&g&2&&(t=!0,O.isOpen=_[1],Y(()=>t=!1)),e.$set(O),_[0].length==0?p||(p=je(),p.c(),p.m(r,a)):p&&(p.d(1),p=null),g&127){b=fe(_[0]);let $;for($=0;$<b.length;$+=1){const c=Re(_,b,$);m[$]?m[$].p(c,g):(m[$]=Fe(c),m[$].c(),m[$].m(r,null))}for(;$<m.length;$+=1)m[$].d(1);m.length=b.length}},i(_){u||(H(e.$$.fragment,_),u=!0)},o(_){L(e.$$.fragment,_),u=!1},d(_){_&&(D(s),D(l)),R(e,_),p&&p.d(),$e(m,_)}}}function yt(n,e,t){let{tableData:s=[]}=e,l=[],r=!1,a="edit",u;ke(async()=>{s.forEach(async o=>{let k=await De(o.password,o.iv,ge());l.push({password:k,id:o.passwordID})})});const i=o=>l.find(k=>k.id===o);let f="",p=-1,b;const m=async o=>{clearTimeout(b);let k=i(o);if(!k)t(4,f="Error: Couldn't decrypt password");else try{await navigator.clipboard.writeText(k.password),t(4,f="Password copied")}catch{t(4,f="Failed to copy!")}t(5,p=o),b=setTimeout(()=>{t(5,p=-1)},2e3)},_=()=>{le.delete(`/vault/${u}`).then(o=>{o.status===200&&t(1,r=!1)}).finally(()=>be())};function g(o){r=o,t(1,r)}function O(o){u=o,t(3,u)}function $(o){r=o,t(1,r)}function c(o){r=o,t(1,r)}const h=o=>{m(o.passwordID)},v=o=>{t(2,a="edit"),t(3,u=o.passwordID),t(1,r=!0)},d=o=>{t(3,u=o.passwordID),t(2,a="delete"),t(1,r=!0)};return n.$$set=o=>{"tableData"in o&&t(0,s=o.tableData)},[s,r,a,u,f,p,m,_,g,O,$,c,h,v,d]}class Dt extends de{constructor(e){super(),he(this,e,yt,Ot,ce,{tableData:0})}}function Tt(n){let e,t,s;function l(a){n[4](a)}let r={};return n[1]!==void 0&&(r.isOpen=n[1]),e=new rt({props:r}),Q.push(()=>G(e,"isOpen",l)),{c(){A(e.$$.fragment)},l(a){S(e.$$.fragment,a)},m(a,u){K(e,a,u),s=!0},p(a,u){const i={};!t&&u&2&&(t=!0,i.isOpen=a[1],Y(()=>t=!1)),e.$set(i)},i(a){s||(H(e.$$.fragment,a),s=!0)},o(a){L(e.$$.fragment,a),s=!1},d(a){R(e,a)}}}function It(n){let e,t,s=Tt(n);return{c(){s&&s.c(),e=ae()},l(l){s&&s.l(l),e=ae()},m(l,r){s&&s.m(l,r),J(l,e,r),t=!0},p(l,r){s.p(l,r)},i(l){t||(H(s),t=!0)},o(l){L(s),t=!1},d(l){l&&D(e),s&&s.d(l)}}}function Mt(n){let e,t,s;function l(a){n[6](a)}let r={};return n[2]!==void 0&&(r.isOpen=n[2]),e=new Te({props:r}),Q.push(()=>G(e,"isOpen",l)),{c(){A(e.$$.fragment)},l(a){S(e.$$.fragment,a)},m(a,u){K(e,a,u),s=!0},p(a,u){const i={};!t&&u&4&&(t=!0,i.isOpen=a[2],Y(()=>t=!1)),e.$set(i)},i(a){s||(H(e.$$.fragment,a),s=!0)},o(a){L(e.$$.fragment,a),s=!1},d(a){R(e,a)}}}function Qe(n){let e,t,s,l;return e=new He({props:{query:Pt,$$slots:{default:[Ct]},$$scope:{ctx:n}}}),s=new He({props:{query:Ht,$$slots:{default:[Et]},$$scope:{ctx:n}}}),{c(){A(e.$$.fragment),t=z(),A(s.$$.fragment)},l(r){S(e.$$.fragment,r),t=P(r),S(s.$$.fragment,r)},m(r,a){K(e,r,a),J(r,t,a),K(s,r,a),l=!0},p(r,a){const u={};a&513&&(u.$$scope={dirty:a,ctx:r}),e.$set(u);const i={};a&513&&(i.$$scope={dirty:a,ctx:r}),s.$set(i)},i(r){l||(H(e.$$.fragment,r),H(s.$$.fragment,r),l=!0)},o(r){L(e.$$.fragment,r),L(s.$$.fragment,r),l=!1},d(r){r&&D(t),R(e,r),R(s,r)}}}function Ct(n){let e,t;return e=new Dt({props:{tableData:n[0].passwords}}),{c(){A(e.$$.fragment)},l(s){S(e.$$.fragment,s)},m(s,l){K(e,s,l),t=!0},p(s,l){const r={};l&1&&(r.tableData=s[0].passwords),e.$set(r)},i(s){t||(H(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){R(e,s)}}}function Et(n){let e,t;return e=new vt({props:{tableData:n[0].passwords}}),{c(){A(e.$$.fragment)},l(s){S(e.$$.fragment,s)},m(s,l){K(e,s,l),t=!0},p(s,l){const r={};l&1&&(r.tableData=s[0].passwords),e.$set(r)},i(s){t||(H(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){R(e,s)}}}function zt(n){let e,t,s,l,r,a,u,i,f,p="Add",b,m,_;function g(v){n[5](v)}let O={$$slots:{default:[It]},$$scope:{ctx:n}};n[1]!==void 0&&(O.isOpen=n[1]),t=new ve({props:O}),Q.push(()=>G(t,"isOpen",g));function $(v){n[7](v)}let c={$$slots:{default:[Mt]},$$scope:{ctx:n}};n[2]!==void 0&&(c.isOpen=n[2]),r=new ve({props:c}),Q.push(()=>G(r,"isOpen",$));let h=n[3]&&Qe(n);return{c(){e=T("section"),A(t.$$.fragment),l=z(),A(r.$$.fragment),u=z(),h&&h.c(),i=z(),f=T("button"),f.textContent=p,this.h()},l(v){e=I(v,"SECTION",{class:!0});var d=W(e);S(t.$$.fragment,d),l=P(d),S(r.$$.fragment,d),u=P(d),h&&h.l(d),i=P(d),f=I(d,"BUTTON",{class:!0,"data-svelte-h":!0}),x(f)!=="svelte-8pv6p2"&&(f.textContent=p),d.forEach(D),this.h()},h(){M(f,"class","add svelte-1d6ru4h"),M(e,"class","svelte-1d6ru4h")},m(v,d){J(v,e,d),K(t,e,null),w(e,l),K(r,e,null),w(e,u),h&&h.m(e,null),w(e,i),w(e,f),b=!0,m||(_=re(f,"click",n[8]),m=!0)},p(v,[d]){const o={};d&514&&(o.$$scope={dirty:d,ctx:v}),!s&&d&2&&(s=!0,o.isOpen=v[1],Y(()=>s=!1)),t.$set(o);const k={};d&516&&(k.$$scope={dirty:d,ctx:v}),!a&&d&4&&(a=!0,k.isOpen=v[2],Y(()=>a=!1)),r.$set(k),v[3]?h?(h.p(v,d),d&8&&H(h,1)):(h=Qe(v),h.c(),H(h,1),h.m(e,i)):h&&(Oe(),L(h,1,1,()=>{h=null}),ye())},i(v){b||(H(t.$$.fragment,v),H(r.$$.fragment,v),H(h),b=!0)},o(v){L(t.$$.fragment,v),L(r.$$.fragment,v),L(h),b=!1},d(v){v&&D(e),R(t),R(r),h&&h.d(),m=!1,_()}}}let Pt="(max-width: 1100px)",Ht="(min-width: 1101px)";function Lt(n,e,t){let s=!1,{data:l=[]}=e,r=!1,a=!1;ke(async()=>{ge()?a||(l.passwords.map(async _=>{_.websiteURL=await De(_.websiteURL,_.iv,ge())}),setTimeout(()=>{t(0,l),t(3,a=!0)},5)):await Ye("/unlockvault")});function u(m){s=m,t(1,s)}function i(m){s=m,t(1,s)}function f(m){r=m,t(2,r)}function p(m){r=m,t(2,r)}const b=()=>t(2,r=!0);return n.$$set=m=>{"data"in m&&t(0,l=m.data)},[l,s,r,a,u,i,f,p,b]}class Ft extends de{constructor(e){super(),he(this,e,Lt,zt,ce,{data:0})}}export{Ft as component,Wt as universal};
